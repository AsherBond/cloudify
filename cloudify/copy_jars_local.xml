<?xml version="1.0"?>

<!-- helper build file that copies generated cloudify files to the local cloudify install -->
<!-- TODO - Pick up CLOUDIFY_LATEST variable instead of using hard coded value			  -->
<!-- Author: Barak Merimovich 															  -->

<project name="copy-jars-to-cloudify" default="dist" basedir=".">

	<property name="target.dir" value="D:/Gigaspaces/gigaspaces-cloudify-2.0.0-m5" />


	<target name="dist" depends="">
		<echo message="Copying Cloudify jar files to ${target.dir}" />
		<copy todir="${target.dir}/lib/platform/usm" file="../USM/target/usm.jar" />
		<copy todir="${target.dir}/tools/cli" file="../CLI/target/cli.jar" />
		<copy todir="${target.dir}/tools/rest" file="../restful/target/rest.war" />
		<copy todir="${target.dir}/lib/required" file="../dsl/target/dsl.jar" />
		<copy todir="${target.dir}/lib/platform/esm" file="../esc/target/esc.jar" />
		<copy todir="${target.dir}/tools/cli/plugins/esc" file="../esc-commands/target/esc-commands.jar" />
	</target>
	
	<target name="Create cloudify zip" depends="">
		<echo message="Creating zip distro of ${target.dir}" />
		<delete file="${target.dir}/../gigaspaces.zip"/>
		<delete includeemptydirs="true" quiet="true" >
			<fileset dir="${target.dir}/work/processing-units" includes="**.*" />
			<fileset dir="${target.dir}/deploy" includes="**.*" excludes="datagrid/**.*" />
			<fileset dir="${target.dir}/logs" includes="**.*"  />
		</delete>
		<zip destfile="${target.dir}/../gigaspaces.zip" basedir="${target.dir}/.." />
		<echo message="Created ${target.dir}/../gigaspaces.zip" />


	</target>


</project>